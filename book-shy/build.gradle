plugins {
    id 'java' // Java í”„ë¡œì íŠ¸ë¡œ ì¸ì‹ë˜ë„ë¡ ì§€ì •
    id 'org.springframework.boot' version '3.2.5' // Spring Boot ì§€ì› (ë¹Œë“œ, ì‹¤í–‰ ë“± ìë™í™”)
    id 'io.spring.dependency-management' version '1.1.7' // BOM ê¸°ë°˜ ì˜ì¡´ì„± ë²„ì „ í†µì œ
    id "org.sonarqube" version "4.3.0.3225" // ì½”ë“œ í’ˆì§ˆ ë¶„ì„ ë„êµ¬ SonarQube ì—°ë™
}

group = 'com.ssafy.book-shy'
version = '0.0.1-SNAPSHOT'

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17) // ìë°” 17 ë²„ì „ ëª…ì‹œ (JDK 17)
    }
}

repositories {
    mavenCentral() // ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•œ ì¤‘ì•™ Maven ì €ì¥ì†Œ
}

dependencies {
    // ğŸŒ ì›¹ ë° ë°ì´í„° ê³„ì¸µ ì˜ì¡´ì„±
    implementation 'org.springframework.boot:spring-boot-starter-data-jdbc' // JDBC ê¸°ë°˜ ë°ì´í„° ì ‘ê·¼ (MyBatisì²˜ëŸ¼ ì§ì ‘ ì¿¼ë¦¬í•  ë•Œ ì‚¬ìš©)
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa' // JPA ê¸°ë°˜ ORM ë°ì´í„° ì ‘ê·¼
    implementation 'org.springframework.boot:spring-boot-starter-data-redis' // Redis ì—°ë™ (ìºì‹±, ì„¸ì…˜ ë“±)

    // ğŸ”’ ì‹œíë¦¬í‹° (í˜„ì¬ ì£¼ì„ ì²˜ë¦¬ë¨)
    // implementation 'org.springframework.boot:spring-boot-starter-security'

    implementation 'org.springframework.boot:spring-boot-starter-web' // REST API ê°œë°œì„ ìœ„í•œ ê¸°ë³¸ ì›¹ ìŠ¤íƒ€í„°
    implementation 'org.springframework.boot:spring-boot-starter-websocket' // WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ í†µì‹  ì§€ì›

    // ğŸ“˜ Swagger(OpenAPI) ë¬¸ì„œ ìë™ ìƒì„± (SpringDoc)
    implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.5.0'

    // âœ… Bean Validation(JSR-380) ì‚¬ìš© ì‹œ í•„ìš” (ì˜ˆ: @NotNull ë“±)
    implementation 'org.hibernate.validator:hibernate-validator'

    // âœ… Kafka Consumer (ìœ ì € ì„œë¹„ìŠ¤ì—ì„œ ê²°ì œ ì„±ê³µ ì´ë²¤íŠ¸ ìˆ˜ì‹ )
    implementation 'org.springframework.kafka:spring-kafka'

    // âœ… Kafka JSON ì²˜ë¦¬
    implementation 'com.fasterxml.jackson.core:jackson-databind'

    // ğŸ“ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ ëª¨ë‹ˆí„°ë§
    implementation 'org.springframework.boot:spring-boot-starter-actuator' // í—¬ìŠ¤ì²´í¬, ë©”íŠ¸ë¦­ ë“± ì œê³µ
    implementation 'io.micrometer:micrometer-registry-prometheus' // Prometheus ì—°ë™ì„ ìœ„í•œ Micrometer ëª¨ë“ˆ

    // âš™ï¸ ì»¤ë„¥ì…˜ í’€
    implementation 'com.zaxxer:HikariCP' // Spring Bootì—ì„œ ê¸°ë³¸ ì‚¬ìš©ë˜ëŠ” HikariCP

    // ğŸ”„ ê°œë°œ í¸ì˜ì„± í–¥ìƒ (ìë™ ë¦¬ë¡œë”© ë“±)
    developmentOnly 'org.springframework.boot:spring-boot-devtools'

    // ğŸ˜ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„
    runtimeOnly 'org.postgresql:postgresql'

    // Logstash ë¡œê¹… ì˜ì¡´ì„±
    implementation 'net.logstash.logback:logstash-logback-encoder:7.4'

    // ğŸ”§ ë¡¬ë³µ (ê°œë°œ í¸ì˜ìš© ì• ë…¸í…Œì´ì…˜ - @Getter, @Builder ë“±)
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'

    // ğŸ’¬ ì±„íŒ…
    implementation("org.springframework.boot:spring-boot-starter-websocket")
    implementation("org.springframework.boot:spring-boot-starter-web")
    implementation("com.fasterxml.jackson.core:jackson-databind")

    implementation 'com.google.code.gson:gson:2.10.1'

    // âœ… í…ŒìŠ¤íŠ¸ ê´€ë ¨ ì˜ì¡´ì„±
    testImplementation 'org.springframework.boot:spring-boot-starter-test' // JUnit5 + Mockito í†µí•©
    testImplementation 'org.springframework.security:spring-security-test' // ì‹œíë¦¬í‹° í…ŒìŠ¤íŠ¸ ë„êµ¬
    testRuntimeOnly 'org.junit.platform:junit-platform-launcher' // IDEì—ì„œ JUnit í”Œë«í¼ ì‹¤í–‰ ë³´ì¡°
}

tasks.named('test') {
    useJUnitPlatform() // JUnit5 ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì„¤ì •
}
